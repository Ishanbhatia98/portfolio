{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ user.full_name|default:"Profile" }}</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'profile.css' %}">
</head>

<body>
    <div class="page">

        <!-- NAVBAR -->
        <nav id="navbar">
            <ul class="nav-links">
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a class="active" href="{% url 'profile' %}">Profile</a></li>
                <li><a href="{% url 'projects' %}">Projects</a></li>
                <li><a href="{% url 'contact' %}">Contact</a></li>
            </ul>
        </nav>

        <!-- MAIN CARD -->
        <div class="card">

            <!-- PROFILE HEADER -->
            <div class="profile-header">
                <div class="avatar-wrapper">
                    {% if user.profile_picture %}
                        <img src="{{ user.profile_picture }}" class="avatar-img" alt="Profile Picture">
                    {% else %}
                        <div class="avatar-fallback">{{ user.initials|default:user.full_name|slice:":1"|upper }}</div>
                    {% endif %}
                </div>

                <div class="header-info">
                    <div class="full-name">{{ user.full_name }}</div>
                    <div class="title">{{ user.title|default:"Software Engineer" }}</div>

                    <div class="contact">
                        {% if user.email %}<div>{{ user.email }}</div>{% endif %}
                        {% if user.phone %}<div>{{ user.phone }}</div>{% endif %}
                        {% if user.website %}<div><a class="accent" href="{{ user.website }}">Website</a></div>{% endif %}
                    </div>
                </div>
            </div>

            <!-- GRID LAYOUT -->
            <div class="grid">

                <!-- LEFT PANEL -->
                <aside class="side">

                    <!-- ABOUT -->
                    <section class="side-section">
                        <div class="side-title">About</div>
                        <div class="side-body about">{{ user.summary }}</div>
                    </section>

                    <!-- SKILLS -->
                    <section class="side-section">
                        <div class="side-title">Skills</div>
                        <div class="side-body skills">
                            {% for s in skills %}
                                <div class="skill">{{ s.name }}</div>
                            {% endfor %}
                        </div>
                    </section>

                    <!-- QUICK LINKS -->
                    <section class="side-section">
                      <div class="side-title">Quick Links</div>
                      <div class="side-body quick-links">
                          {% if user.linkedin_url %}<a class="ql" href="{{ user.linkedin_url }}">LinkedIn</a>{% endif %}
                          {% if user.leetcode_url %}<a class="ql" href="{{ user.leetcode_url }}">LeetCode</a>{% endif %}
                          {% if user.github_url %}<a class="ql" href="{{ user.github_url }}">GitHub</a>{% endif %}
                          {% if user.hackerrank_url %}<a class="ql" href="{{ user.hackerrank_url }}">Hackerrank</a>{% endif %}
                        </div>
                  </section>

                    <!-- CERTIFICATIONS -->
                    <section class="side-section">
                        <div class="side-title">Certifications</div>
                        <div class="cert-grid">
                            {% for c in certifications %}
                                <a href="{{ c.link }}" target="_blank" rel="noopener" class="cert-tile">
                                    <div class="cert-title">{{ c.title }}</div>
                                    <div class="cert-meta">{{ c.issuer }}{% if c.date %} · {{ c.date|date:"M Y" }}{% endif %}</div>
                                </a>
                            {% empty %}
                                <div class="empty">No certifications added.</div>
                            {% endfor %}
                        </div>
                    </section>



                </aside>

                <!-- RIGHT PANEL -->
                <main class="main">

                    <!-- EDUCATION -->
                    <section class="block">
                        <div class="section-title">Education</div>
                        {% for e in education %}
                            <div class="item">
                                <div class="left">
                                    <div class="item-title">{{ e.institution }}</div>
                                    <div class="item-sub">{{ e.degree }}{% if e.field %} — {{ e.field }}{% endif %}</div>
                                    {% if e.description %}
                                        <div class="item-desc">{{ e.description }}</div>
                                    {% endif %}
                                </div>
                                <div class="right">
                                    <div class="date">
                                        {{ e.start_date|date:"M Y" }} —
                                        {% if e.end_date %}{{ e.end_date|date:"M Y" }}{% else %}Present{% endif %}
                                    </div>
                                </div>
                            </div>
                        {% empty %}
                            <div class="empty">No education added.</div>
                        {% endfor %}
                    </section>

                    <!-- WORK EXPERIENCE -->
                    <section class="block">
                        <div class="section-title">Work Experience</div>
                        {% for job in experience %}
                            <div class="item grid-2x2">
                                <div class="org">{{ job.org }}</div>
                                <div class="dates">{{ job.start_date|date:"M Y" }} — {% if job.end_date %}{{ job.end_date|date:"M Y" }}{% else %}Present{% endif %}</div>
                                <div class="role">{{ job.role }}</div>
                                <div class="location">{{ job.location|default:"Remote" }}</div>

                                {% if job.description %}
                                    <ul class="desc-list full-width">
                                        {% for d in job.description %}
                                            <li>{{ d.description }}</li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                            </div>
                        {% empty %}
                            <div class="empty">No experience added.</div>
                        {% endfor %}
                    </section>

                </main>

            </div>
        </div>

    </div>
</body>
</html>